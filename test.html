<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
    <script type="text/javascript" src="lib/rivets.js"></script>

    <script type="text/javascript">
        jQuery(function($) {
            var sub, o, k, vals = { widget: 1 };
            rivets.configure({
                adapter: {
                    subscribe: function(obj, keypath, callback) {
                        console.log('subscribed', callback); //debug
                        sub = callback;
                        o = obj;
                        k = keypath;
                    },
                    unsubscribe: function() {
                        console.log('unsubscribed'); //debug
                        sub = null;
                    },
                    read: function(o, k) {
                        console.log('reading', o, k); //debug
                        return o[k];
                    },
                    publish: function(o, k, v) {
                        console.log('writing', v); //debug
                        o[k] = v;
                    }
                }
            });

            var view;

            setInterval(function() {
                vals.widget++;
                sub && sub(vals);
            }, 1000);

            $('button').on('click', function() {
               if( view ) {
                   console.log('inactive', vals); //debug
                   view.unbind();
                   view = null;
               }
               else {
                   console.log('active', vals); //debug
                   view = rivets.bind($('input')[0], vals);
               }
            });
        });
    </script>

</head>
<body>

<button>toggle binding</button>

<input name="text" data-input="widget" value="0" />

</body>
</html>